@using Sitecore.Foundation.SitecoreExtensions.Extensions;
@using Feature.Marketing.Email
@using Feature.Marketing.Email.Extensions
@model Feature.Marketing.Email.Models.ImageBesideTextViewModel

@if (Model?.DataSource != null)
{
  <td style="text-align: left; display: inline-block; margin-@Model.ImageAlignAttrValue: 30px;">
    <p style="color:@Const.Styling.HexColors.OuterSpace; font-size: 12px; line-height: 20px; font-weight: bold; margin-top: 0; margin-bottom: 0;">
      @Html.Sitecore().Field(Const.Fields.ImageBesideText.Title, @Model.DataSource)
    </p>
    <p style="color: @Const.Styling.HexColors.OuterSpace; font-size: 12px; line-height: 20px; margin-top: 0; margin-bottom: 30px;">
      @Html.Sitecore().Field(Const.Fields.ImageBesideText.Text, @Model.DataSource)
    </p>
    <p style="margin: 0;">

      @if (Model.LinkData != null && Model.LinkData.ShowLink)
      {
        if (!Model.LinkData.LinkUrlIsValid)
        {
          @Html.EEWarning(Const.ExperienceEditor.CTAInvalidURLWarning);
        }

        @Html.Sitecore().BeginField(Const.Fields.ImageBesideText.Link, Model.DataSource,
            new
                 {
                style = "background: " + @Const.Styling.HexColors.BrightBlue + "; text-transform: uppercase; text-decoration: none; padding: 10px 38px; color: " + @Const.Styling.HexColors.White + "; display: inline-block; mso-padding-alt: 0;",
                text = " ",
            })

        <!--[if mso]>
        <i style="letter-spacing: 38px; mso-font-width:-100%; mso-text-raise:18pt">&nbsp;</i>
         <![endif]-->
        <span style="mso-text-raise: 12px; font-size: 12px; font-weight: bold; color: @Const.Styling.HexColors.White">@Model.LinkData.LinkText</span>
        <!--[if mso]>
        <i style="letter-spacing: 38px; mso-font-width:-100%">&nbsp;</i>
        <![endif]-->

        @Html.Sitecore().EndField()
      }
    </p>
  </td>
}